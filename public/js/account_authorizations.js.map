{"version":3,"sources":["account_authorizations.js"],"names":[],"mappings":";;AAAA,QAAQ,CACJ,UADI,EAEJ,kBAFI,EAGJ,qBAHI,CAAR,EAIA,UACI,MADJ,EAEI,cAFJ,EAGI,iBAHJ,EAIA;AACA,iBADA;;AAGA,QAAI,eAAe,SAAf,YAAe,CAAS,IAAT,EAAe;AAC9B,YAAI,OAAO,IAAP,CAD0B;AAE9B,0BAAkB,YAAlB,CAA+B,IAA/B,CAAoC,IAApC,EAA0C,IAA1C,EAF8B;;AAI9B,aAAK,cAAL,GAAsB,GAAG,eAAH,EAAtB,CAJ8B;;AAM9B,aAAK,mBAAL,GAA2B,UAAS,QAAT,EAAmB;AAC1C,mBAAO,KAAK,cAAL,CAAoB,MAApB,CAA2B,UAAS,CAAT,EAAY;AAC1C,uBAAO,EAAE,QAAF,OAAiB,QAAjB,CADmC;aAAZ,CAAlC,CAD0C;SAAnB,CANG;;AAY9B,aAAK,mBAAL,GAA2B,UAAS,aAAT,EAAwB,KAAxB,EAA+B;AACtD,cAAE,IAAF,CAAO;AACH,sBAAM,QAAN;AACA,qBAAK,SAAS,WAAT,CAAqB,OAArB,CAA6B,mBAA7B,CAAiD,cAAc,QAAd,EAAjD,EAA2E,GAA3E;aAFT,EAGG,IAHH,CAGQ,YAAW;AAChB,qBAAK,mBAAL,CAAyB,cAAc,QAAd,EAAzB,EADgB;aAAX,CAHR,CADsD;SAA/B,CAZG;KAAf,CAHnB;;AAyBA,QAAI,gBAAgB,SAAhB,aAAgB,CAAS,QAAT,EAAmB,UAAnB,EAA+B,MAA/B,EAAuC;AACvD,YAAI,OAAO,IAAP,CADmD;;AAGvD,aAAK,QAAL,GAAgB,GAAG,UAAH,CAAc,QAAd,CAAhB,CAHuD;AAIvD,aAAK,UAAL,GAAkB,GAAG,UAAH,CAAc,UAAd,CAAlB,CAJuD;AAKvD,aAAK,MAAL,GAAc,GAAG,UAAH,CAAc,MAAd,CAAd,CALuD;KAAvC,CAzBpB;;AAiCA,MAAE,YAAU;AACR,YAAI,QAAQ,IAAI,YAAJ,CACR,kBAAkB,WAAlB,EADQ,CAAR,CADI;;AAIR,UAAE,IAAF,CAAO;AACH,kBAAM,KAAN;AACA,iBAAK,SAAS,WAAT,CAAqB,OAArB,CAA6B,cAA7B,GAA8C,GAA9C;AACL,qBAAS;AACJ,wBAAS,kBAAT;aADL;SAHJ,EAOC,IAPD,CAOM,UAAS,MAAT,EAAiB;AACnB,kBAAM,cAAN,CAAqB,OAAO,GAAP,CAAW,UAAS,CAAT,EAAY;AACxC,uBAAO,IAAI,aAAJ,CAAkB,EAAE,QAAF,EAAY,EAAE,UAAF,EAAc,EAAE,MAAF,CAAnD,CADwC;aAAZ,CAAhC,EADmB;SAAjB,CAPN,CAJQ;;AAiBR,WAAG,aAAH,CAAiB,KAAjB,EAjBQ;KAAV,CAAF,CAjCA;CAJA,CAJA","file":"account_authorizations.js","sourcesContent":["require([\n    './models',\n    './stream_manager',\n    './application_model'],\nfunction(\n    models,\n    stream_manager,\n    application_model)\n{\n\"use-strict\";\n\nvar AppViewModel = function(user) {\n    var self = this;\n    application_model.AppViewModel.call(this, user);\n\n    self.authorizations = ko.observableArray();\n\n    self.removeAuthorization = function(clientId) {\n        return self.authorizations.remove(function(x) {\n            return x.clientId() === clientId;\n        });\n    };\n\n    self.revokeAuthorization = function(authorization, event) {\n        $.ajax({\n            type: \"DELETE\",\n            url: jsRoutes.controllers.Account.revokeAuthorization(authorization.clientId()).url,\n        }).then(function() {\n           self.removeAuthorization(authorization.clientId());\n        });\n    };\n};\n\nvar Authorization = function(clientId, clientName, issued) {\n    var self = this;\n\n    self.clientId = ko.observable(clientId);\n    self.clientName = ko.observable(clientName);\n    self.issued = ko.observable(issued);\n};\n\n$(function(){\n    var model = new AppViewModel(\n        application_model.initialUser());\n\n    $.ajax({\n        type: \"GET\",\n        url: jsRoutes.controllers.Account.authorizations().url,\n        headers: {\n             Accept : \"application/json\"\n        }\n    })\n    .then(function(result) {\n        model.authorizations(result.map(function(x) {\n            return new Authorization(x.clientId, x.clientName, x.issued);\n        }));\n    });\n\n    ko.applyBindings(model);\n});\n\n});"],"sourceRoot":"/source/"}