{"version":3,"sources":["client.js"],"names":[],"mappings":"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","file":"client.js","sourcesContent":["require([\n    './models',\n    './application_model',\n    './ui'],\nfunction(\n    models,\n    application_model,\n    ui)\n{\n\"use-strict\";\n\n/**\n*/\nvar StreamIndexViewModel = function(user, clientId) {\n    var self = this;\n    application_model.AppViewModel.call(this, user);\n\n    self.clientId = ko.observable(clientId);\n};\n\n\nvar updateRedirects = function(clientId, rediectBlob) {\n    ui.showLoadingScreen();\n    $.ajax({\n        type: \"POST\",\n        url: jsRoutes.controllers.DeveloperController.setRedirects(clientId).url,\n        data: JSON.stringify(rediectBlob.split('\\n')),\n        contentType: 'application/json',\n        error: function(e) {\n            ui.setAlert('alert-danger', e.status == 422 ? \"Specified redirects are invalid. Must be at most 10 http(s) urls.\" : \"An error occurred.\");\n            ui.hideLoadingScreen();\n        }\n    }).done(function(result) {\n        ui.clearAlerts();\n        ui.hideLoadingScreen();\n    });\n};\n\n/**\n    Actually delete the client.\n\n    Redirects to the developer home page on success.\n*/\nvar deleteClient = function(clientId) {\n    ui.showLoadingScreen();\n    $.ajax({\n        type: \"DELETE\",\n        url: jsRoutes.controllers.DeveloperController.deleteClient(clientId).url,\n        error: function() {\n            ui.setAlert('alert-danger', \"Could not delete client, please try again.\");\n            ui.hideLoadingScreen();\n        }\n    }).done(function(result) {\n        window.location = jsRoutes.controllers.DeveloperController.index().url;\n    });\n};\n\n/**\n    Prompt the user to ensure they really want to delete the client.\n*/\nvar askDeleteClient = function(clientId) {\n    bootbox.confirm({\n        title: \"Are you sure?\",\n        animate: false,\n        closeButton: false,\n        message: \"This will permanently delete this client and invalidate all token for it.\",\n        callback: function(result) {\n            if (result) {\n                deleteClient(clientId);\n            }\n        }\n    });\n};\n\n/**\n*/\n$(function() {\n    var model = new StreamIndexViewModel(\n        application_model.initialUser(),\n        window.clientId);\n\n    var currentRedirects =  $('#redirects-textbox').val();\n\n    $('#cancel-redirects-button').on('click', function(e) {\n        $('#redirects-textbox').val(currentRedirects);\n        $('#save-redirects-button, #cancel-redirects-button')\n            .attr(\"disabled\", true);\n    });\n\n    $('#redirects-textbox').on('input', function(e) {\n        $('#save-redirects-button, #cancel-redirects-button')\n            .attr(\"disabled\", false);\n    });\n\n    $('#save-redirects-button').on('click', function() {\n        updateRedirects(model.clientId(), $('#redirects-textbox').val());\n    });\n\n    $('#delete-client-button').on('click', function(e) {\n        askDeleteClient(model.clientId());\n    });\n});\n\n});"],"sourceRoot":"/source/"}